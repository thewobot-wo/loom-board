---
phase: 02-react-frontend
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - tsconfig.json
  - tsconfig.node.json
  - eslint.config.js
  - .prettierrc
  - src/main.tsx
  - src/App.tsx
  - src/vite-env.d.ts
  - src/styles/globals.css
  - index.html
autonomous: true

must_haves:
  truths:
    - "npm run dev starts Vite dev server without errors"
    - "Browser shows React app with Convex provider"
    - "TypeScript compiles with strict mode"
    - "Path aliases resolve (@/components, @/hooks)"
  artifacts:
    - path: "vite.config.ts"
      provides: "Vite configuration with React plugin"
      contains: "@vitejs/plugin-react"
    - path: "tsconfig.json"
      provides: "TypeScript config with strict mode and path aliases"
      contains: "\"strict\": true"
    - path: "src/main.tsx"
      provides: "React entry point with ConvexProvider"
      contains: "ConvexProvider"
    - path: "src/styles/globals.css"
      provides: "CSS variables migrated from vanilla app"
      contains: "--bg-primary"
  key_links:
    - from: "src/main.tsx"
      to: "ConvexReactClient"
      via: "import from convex/react"
      pattern: "ConvexReactClient.*VITE_CONVEX_URL"
    - from: "vite.config.ts"
      to: "tsconfig.json"
      via: "vite-tsconfig-paths plugin"
      pattern: "tsconfigPaths"
---

<objective>
Initialize Vite + React + TypeScript project with Convex integration and CSS variables.

Purpose: Create the foundation for the React frontend with all tooling configured per CONTEXT.md decisions (strict TypeScript, path aliases, CSS modules support, Convex provider).

Output: Working React dev server showing a minimal app connected to Convex.
</objective>

<execution_context>
@/Users/criswo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/criswo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-react-frontend/02-CONTEXT.md
@.planning/phases/02-react-frontend/02-RESEARCH.md
@convex/schema.ts
@loom-board.html (CSS variables in :root, lines 8-27)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and configure Vite + TypeScript</name>
  <files>
    package.json
    vite.config.ts
    tsconfig.json
    tsconfig.node.json
    eslint.config.js
    .prettierrc
    src/vite-env.d.ts
  </files>
  <action>
Install React and build tooling:
```bash
npm install react react-dom
npm install -D vite @vitejs/plugin-react vite-tsconfig-paths typescript @types/react @types/react-dom @types/node
npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom
npm install -D eslint @eslint/js eslint-config-prettier typescript-eslint prettier
npm install -D eslint-plugin-react-hooks eslint-plugin-react-refresh
```

Create vite.config.ts:
```typescript
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import tsconfigPaths from "vite-tsconfig-paths";

export default defineConfig({
  plugins: [react(), tsconfigPaths()],
  test: {
    environment: "jsdom",
    globals: true,
    setupFiles: "./src/tests/setup.ts",
  },
});
```

Create tsconfig.json with strict mode and path aliases:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitAny": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@components/*": ["./src/components/*"],
      "@hooks/*": ["./src/hooks/*"]
    }
  },
  "include": ["src", "convex/_generated"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

Create tsconfig.node.json for Vite config:
```json
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true
  },
  "include": ["vite.config.ts"]
}
```

Create eslint.config.js (flat config format):
```javascript
import js from "@eslint/js";
import tseslint from "typescript-eslint";
import reactHooks from "eslint-plugin-react-hooks";
import reactRefresh from "eslint-plugin-react-refresh";
import prettier from "eslint-config-prettier";

export default tseslint.config(
  { ignores: ["dist", "node_modules", "convex/_generated"] },
  js.configs.recommended,
  ...tseslint.configs.recommended,
  {
    plugins: {
      "react-hooks": reactHooks,
      "react-refresh": reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      "react-refresh/only-export-components": ["warn", { allowConstantExport: true }],
    },
  },
  prettier
);
```

Create .prettierrc:
```json
{
  "semi": true,
  "singleQuote": false,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

Create src/vite-env.d.ts:
```typescript
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_CONVEX_URL: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

Update package.json scripts:
```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx",
    "format": "prettier --write \"src/**/*.{ts,tsx,css}\"",
    "test": "vitest",
    "test:run": "vitest run"
  }
}
```
  </action>
  <verify>
- `npm run dev` starts without errors (Ctrl+C to stop)
- `npx tsc --noEmit` passes with no type errors
- `npm run lint` runs (may have warnings, no errors)
  </verify>
  <done>
Vite dev server starts, TypeScript compiles with strict mode, ESLint and Prettier configured.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create React entry point with Convex provider and CSS globals</name>
  <files>
    index.html
    src/main.tsx
    src/App.tsx
    src/styles/globals.css
    src/tests/setup.ts
  </files>
  <action>
Update index.html for Vite (replace existing or create new):
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loom Board</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

Create src/styles/globals.css - migrate ALL CSS variables from loom-board.html:
```css
:root {
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --bg-tertiary: #21262d;
  --border: #30363d;
  --border-hover: #58a6ff;
  --text-primary: #f0f6fc;
  --text-secondary: #c9d1d9;
  --text-muted: #8b949e;
  --accent-blue: #58a6ff;
  --accent-green: #3fb950;
  --accent-red: #f85149;
  --accent-yellow: #d29922;
  --accent-purple: #a371f7;
  --shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.5);
  --radius: 12px;
  --radius-sm: 8px;
  --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", sans-serif;
  background: var(--bg-primary);
  color: var(--text-secondary);
  min-height: 100vh;
  line-height: 1.5;
}
```

Create src/main.tsx with ConvexProvider:
```typescript
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import { ConvexProvider, ConvexReactClient } from "convex/react";
import App from "./App";
import "./styles/globals.css";

const convex = new ConvexReactClient(import.meta.env.VITE_CONVEX_URL);

createRoot(document.getElementById("root")!).render(
  <StrictMode>
    <ConvexProvider client={convex}>
      <App />
    </ConvexProvider>
  </StrictMode>
);
```

Create src/App.tsx - minimal shell showing Convex connection:
```typescript
import { useQuery } from "convex/react";
import { api } from "../convex/_generated/api";

function App() {
  const tasks = useQuery(api.tasks.listTasks);

  return (
    <div style={{ padding: "24px", maxWidth: "1800px", margin: "0 auto" }}>
      <h1 style={{ color: "var(--text-primary)", marginBottom: "16px" }}>
        Loom Board
      </h1>
      {tasks === undefined ? (
        <p>Loading tasks...</p>
      ) : (
        <p>
          Connected to Convex. Found {tasks.length} task(s).
        </p>
      )}
    </div>
  );
}

export default App;
```

Create src/tests/setup.ts for Vitest:
```typescript
import "@testing-library/jest-dom";
```

Rename .env.local to ensure VITE_ prefix for client-side access:
- The existing CONVEX_URL should be accessible, but verify .env.local has VITE_CONVEX_URL
- If only CONVEX_URL exists, the ConvexProvider will still work (Convex looks for both)
  </action>
  <verify>
- `npm run dev` opens browser showing "Loom Board" and "Connected to Convex. Found X task(s)."
- Browser console has no errors
- CSS variables visible in DevTools (dark theme applied)
  </verify>
  <done>
React app renders with Convex connection showing task count, CSS variables from vanilla app migrated.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run dev` starts Vite dev server on localhost:5173 (or next available port)
2. Browser shows "Loom Board" heading with task count from Convex
3. Dark theme (--bg-primary: #0d1117) applied to body
4. `npx tsc --noEmit` passes with strict mode
5. Path aliases work: `import { X } from "@/components/X"` would resolve
</verification>

<success_criteria>
- Vite dev server runs without errors
- React renders with Convex provider
- TypeScript strict mode enabled with no errors
- CSS variables migrated from vanilla app
- ESLint + Prettier configured
- Path aliases configured in tsconfig.json
</success_criteria>

<output>
After completion, create `.planning/phases/02-react-frontend/02-01-SUMMARY.md`
</output>
